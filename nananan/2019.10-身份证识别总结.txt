身份证识别比赛目前算是告一段落。虽然没有完赛，但相关的工作还是值得总结和记录一下。
题目：对于扫描的身份证图像进行关键要素提取
图像特征：
       1.一张身份证的正反面扫描显示在一张图像，图像的尺寸固定为1000*1000；
       2.一张图像上身份证的两面正反不确定，即一张图中文字方向不同，但都是正面在上，反面在下；
       3.身份证的两面都盖有“复印无效”的水印戳，每一面的左上角加盖“仅供BCID比赛使用”的标识；
       4.扫描的图像存在模糊、重影、亮度过暗/过亮的情况。
针对图像特征的分析：
       1.扫描的身份证，形状、尺寸都是一样的——可通过固定尺寸的遮罩板滤出有效区域；
       2.扫描的身份证边界相对于白色背景有一定的区分度——可通过边界划分出有效区域；
       3.有文字和身份证的图像的部分亮度较白色背景偏暗，可根据亮度分布信息分割图像；
       4.复印无效的水印戳尺寸固定，能否通过去水印的方法进行处理；
       5.模糊和重影等问题，能否通过图像处理修正。
数据预处理方案和其他想法：
       step1:将身份证图像切割，正面反面分开
	方法：计算亮度均值，高于亮度均值的区域为背景区域，逐行逐列扫描，找到每个关键区域的四个边界，从而实现图像切割。
	其他方法：边缘检测，切割图像；
       step2:判断每一面的方向，是否需要旋转
	方法：根据正面左侧文字集中因此亮度和低，反面上半部分亮度和低的特点判断方向。
	其他方法：训练分类网络，将图像分为4类：正面正向，正面反向，反面正向，反面反向
       step3:文字识别
	方案：采用CTPN+DenseNet+CTC网络对转正的图像进行文字识别
	其他方案：CRNN+CTC
       step3.1:检测文字区域
	方案：采用CTPN网络，优点：针对文字目标特点改进anchor机制，准确率更高；缺点：只能识别水平文字。
	其他方案：PSENet，可以检测不同方向的文字
       step3.2:文字切割+识别
	方案：采用DenseNet做图像分类+CTC优化
	其他方案：VGG/ResNet
       step4:训练预处理
	方案：切割图像，使其符合模型训练要求
       step5:测试预处理
	方案：待测试的图像进行以上基本处理后，增加增大对比度+锐化+二值化的操作；其中经过实验发现，一阶锐化size=6卷积核和二阶锐化size=9的锐化效果最好。
       step6:结果输出及标签提取
	问题描述：文本识别后输出的是成段的文字信息，还需要从不确定准确率的文字信息中提取身份证关键要素
	方案：6.1去除无用项
	          6.2去除干扰字符
  	          6.3匹配校正关键信息
		6.3.1 姓名 删除包含BDCI的项 建立百家姓list 当首字符识别为姓氏的标签认为是姓名信息
		6.3.2 性别 匹配大段文本中的“男”/“女”
		6.3.3 民族 建立56个民族list 模糊匹配找到的信息作为民族信息
		6.3.4 住址 建立各级行政区及其从属关系list 
			第一级行政区为 省/自治区/直辖市 
			第二级行政区包括 市/省直辖县级行政区划/自治区直辖县级行政区划/盟/地区/市辖区
			第三级行政区包括 (县级)市/县/旗/自治州/区
			第四级行政区包括 乡/镇/街道……
		        通过正则表达式匹配各级行政区信息，模糊匹配各级行政区list，校正住址信息
		6.3.5 出生日期 正则表达式匹配带有数字的标签，较短为出生日期，较长为身份证号 
			通过年、月、日/空格/长度 提取出生日期信息
			通过身份证号的识别结果与出生日期相互校正
		6.3.6 身份证号 前6为为出生起区域码 可根据住址信息进行校正 但不绝对
			接下来的8位为出生日期，可与出生日期相互校正
		6.3.7 签发机关 为二级行政区+三级行政区+公安局 该信息可通过住址信息进行校正
		6.3.8 有效期限 有效期限的格式为 xxxx.xx.xx-xxxx.xx.xx/xxxx.xx.xx-长期
			有效期限通常为5年、10年、20年、30年和长期，且起止日期相同。
			起止日期的月/日可互相校正，起止日期的年份满足差值为5/10/20/30

